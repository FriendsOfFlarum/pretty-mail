(()=>{var t={n:n=>{var e=n&&n.__esModule?()=>n.default:()=>n;return t.d(e,{a:e}),e},d:(n,e)=>{for(var o in e)t.o(e,o)&&!t.o(n,o)&&Object.defineProperty(n,o,{enumerable:!0,get:e[o]})},o:(t,n)=>Object.prototype.hasOwnProperty.call(t,n),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},n={};(()=>{"use strict";t.r(n);const e=flarum.core.compat["admin/app"];var o=t.n(e);function s(t,n){return s=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t},s(t,n)}const r=flarum.core.compat["components/Button"];var i=t.n(r);const a=flarum.core.compat["components/ExtensionPage"];var l=t.n(a);const u=flarum.core.compat["utils/saveSettings"];var d=t.n(u);const p=flarum.core.compat["components/Switch"];var c=t.n(p);const f=flarum.core.compat["utils/withAttr"];var y=t.n(f);const g=flarum.core.compat["utils/Stream"];var h=t.n(g),b=function(t){var n,e;function r(){return t.apply(this,arguments)||this}e=t,(n=r).prototype=Object.create(e.prototype),n.prototype.constructor=n,s(n,e);var a=r.prototype;return a.oninit=function(n){var e=this;t.prototype.oninit.call(this,n),this.fields=["mailhtml","newPost","postMentioned","userMentioned","includeCSS"],this.values=[],this.settingsPrefix="fof-pretty-mail";var s=o().data.settings;this.fields.forEach((function(t){return e.values[t]=h()(s[e.addPrefix(t)])}))},a.content=function(){var t=this;return[m("div",{style:"padding-bottom: 20px",className:"SettingsPage"},[m("div",{className:"container"},[m("Form-group",[m("Form",{onsubmit:this.onsubmit.bind(this)},[m("h1",o().translator.trans("fof-pretty-mail.admin.settings.label")),m("div",{className:"helpText",style:"margin: 10px 0 10px"},o().translator.trans("fof-pretty-mail.admin.settings.help",{strong:m("strong",null)})),m("label",o().translator.trans("fof-pretty-mail.admin.settings.default")),m("br"),i().component({type:"button",style:"margin-bottom: 10px",className:"Button Button--primary",onclick:function(){confirm(o().translator.trans("fof-pretty-mail.admin.settings.confirm")+" default?")&&t.values.mailhtml('<html>\n<head>\n    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">\n    <style type="text/css">\n        body {\n            font-family: \'Open Sans\', sans-serif;\n            background: white;\n            color: #426799;\n            margin: 0;\n            padding: 0;\n        }\n        .content {\n            box-sizing: border-box;\n            width: 100%;\n            max-width: 500px;\n            margin: 0 auto;\n            padding: 10px 20px;\n        }\n        .header {\n            border-bottom: 1px solid #e8ecf3;\n         }\n         .header a {\n            color: {{ $settings->get(\'theme_primary_color\') }};\n            text-decoration: none;\n         }\n         .footer {\n            background: #e8ecf3;\n         }\n    </style>\n    @if ($forumStyle !== \'\')\n    <style>\n        {!! $forumStyle !!}\n    </style>\n    @endif\n</head>\n<body>\n<div class="header">\n    <div class="content">\n        <a href="{{ $url->to(\'forum\')->base() }}">{{ $settings->get(\'forum_title\') }}</a>\n    </div>\n</div>\n<div class="content">\n    {!! $body !!}\n</div>\n<div class="footer">\n    <div class="content">\n        <p>Sent from {{ $settings->get(\'forum_title\') }} using FoF Pretty Mail</p>\n    </div>\n</div>\n</body>\n</html>')}},o().translator.trans("fof-pretty-mail.admin.settings.reset")),m("textarea.FormControl",{rows:"15",value:this.values.mailhtml(),style:"margin: 10px 0 10px",oninput:y()("value",this.values.mailhtml)}),m("h3",o().translator.trans("fof-pretty-mail.admin.settings.notifications")),m("div",{className:"helpText",style:"margin-top: 10px"},o().translator.trans("fof-pretty-mail.admin.settings.notificationHelp")),m("label",o().translator.trans("fof-pretty-mail.admin.settings.newPost")),m("br"),i().component({type:"button",style:"margin: 10px 0 10px",className:"Button Button--primary",onclick:function(){confirm(o().translator.trans("fof-pretty-mail.admin.settings.confirm")+" newPost?")&&t.values.newPost('<html>\n<head>\n    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">\n    <style type="text/css">\n        body {\n            font-family: \'Open Sans\', sans-serif;\n            background: white;\n            color: #426799;\n            margin: 0;\n            padding: 0;\n        }\n        .content {\n            box-sizing: border-box;\n            width: 100%;\n            max-width: 500px;\n            margin: 0 auto;\n            padding: 10px 20px;\n        }\n        .header {\n            border-bottom: 1px solid #e8ecf3;\n        }\n        .header a {\n            color: {{ $settings->get(\'theme_primary_color\') }};\n            text-decoration: none;\n        }\n        .footer {\n            background: #e8ecf3;\n        }\n    </style>\n    <style>\n        {!! $forumStyle !!}\n    </style>\n</head>\n<body>\n<div class="header">\n    <div class="content">\n        <a href="{{ $url->to(\'forum\')->base() }}">{{ $settings->get(\'forum_title\') }}</a>\n    </div>\n</div>\n<div class="content">\n    <div class="info">\n        <p>Hey {!! $user->display_name !!}!</p>\n\n        <p><a href="{{ $url->to(\'forum\')->route(\'user\', [\'username\' => $blueprint->post->user->username]) }}">{!! $blueprint->post->user->username !!}</a> made a post in a discussion you\'re following: <a href="{{ $url->to(\'forum\')->route(\'discussion\', [\'id\' => $blueprint->post->discussion_id, \'near\' => $blueprint->post->number]) }}">{!! $blueprint->post->discussion->title !!}</a></p>\n\n        ---\n\n    </div>\n    <br/>\n    <div class="post-content">\n        {!! $blueprint->post->formatContent() !!}\n    </div>\n    <br/>\n    <div class="info">\n        ---\n\n        <p>You won\'t receive any more notifications about this discussion until you\'re up-to-date.</p>\n    </div>\n</div>\n<div class="footer">\n    <div class="content">\n        <p>Sent from {{ $settings->get(\'forum_title\') }} using FoF Pretty Mail</p>\n    </div>\n</div>\n</body>\n</html>')}},o().translator.trans("fof-pretty-mail.admin.settings.reset")),m("textarea.FormControl",{rows:"15",value:this.values.newPost(),style:"margin-bottom: 10px",oninput:y()("value",this.values.newPost)}),m("label",o().translator.trans("fof-pretty-mail.admin.settings.userMentioned")),m("br"),i().component({type:"button",style:"margin: 10px 0 10px",className:"Button Button--primary",onclick:function(){confirm(o().translator.trans("fof-pretty-mail.admin.settings.confirm")+" userMentioned?")&&t.values.userMentioned('<html>\n<head>\n    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">\n    <style type="text/css">\n        body {\n            font-family: \'Open Sans\', sans-serif;\n            background: white;\n            color: #426799;\n            margin: 0;\n            padding: 0;\n        }\n        .content {\n            box-sizing: border-box;\n            width: 100%;\n            max-width: 500px;\n            margin: 0 auto;\n            padding: 10px 20px;\n        }\n        .header {\n            border-bottom: 1px solid #e8ecf3;\n        }\n        .header a {\n            color: {{ $settings->get(\'theme_primary_color\') }};\n            text-decoration: none;\n        }\n        .footer {\n            background: #e8ecf3;\n        }\n    </style>\n    <style>\n        {!! $forumStyle !!}\n    </style>\n</head>\n<body>\n<div class="header">\n    <div class="content">\n        <a href="{{ $url->to(\'forum\')->base() }}">{{ $settings->get(\'forum_title\') }}</a>\n    </div>\n</div>\n<div class="content">\n    <div class="info">\n        <p>Hey {!! $user->display_name !!}!</p>\n\n        <p><a href="{{!! $url->to(\'forum\')->route(\'user\', [\'username\' => $blueprint->post->user->username]) !!}}">{!! $blueprint->post->user->username !!}</a> mentioned you in a post in <a href="{{!! $url->to(\'forum\')->route(\'discussion\', [\'id\' => $blueprint->post->discussion_id, \'near\' => $blueprint->post->number]) !!}}">{!! $blueprint->post->discussion->title !!}</a>.</p>\n\n        ---\n\n    </div>\n    <br/>\n    <div class="post-content">\n        {!! $blueprint->post->formatContent() !!}\n    </div>\n    <br/>\n</div>\n<div class="footer">\n    <div class="content">\n        <p>Sent from {{ $settings->get(\'forum_title\') }} using FoF Pretty Mail</p>\n    </div>\n</div>\n</body>\n</html>')}},o().translator.trans("fof-pretty-mail.admin.settings.reset")),m("textarea.FormControl",{rows:"15",value:this.values.userMentioned(),style:"margin-bottom: 10px",oninput:y()("value",this.values.userMentioned)}),m("label",o().translator.trans("fof-pretty-mail.admin.settings.postMentioned")),m("br"),i().component({type:"button",style:"margin: 10px 0 10px",className:"Button Button--primary",onclick:function(){confirm(o().translator.trans("fof-pretty-mail.admin.settings.confirm")+" postMentioned?")&&t.values.postMentioned('<html>\n<head>\n    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">\n    <style type="text/css">\n        body {\n            font-family: \'Open Sans\', sans-serif;\n            background: white;\n            color: #426799;\n            margin: 0;\n            padding: 0;\n        }\n        .content {\n            box-sizing: border-box;\n            width: 100%;\n            max-width: 500px;\n            margin: 0 auto;\n            padding: 10px 20px;\n        }\n        .header {\n            border-bottom: 1px solid #e8ecf3;\n        }\n        .header a {\n            color: {{ $settings->get(\'theme_primary_color\') }};\n            text-decoration: none;\n        }\n        .footer {\n            background: #e8ecf3;\n        }\n    </style>\n    <style>\n        {!! $forumStyle !!}\n    </style>\n</head>\n<body>\n<div class="header">\n    <div class="content">\n        <a href="{{ $url->to(\'forum\')->base() }}">{{ $settings->get(\'forum_title\') }}</a>\n    </div>\n</div>\n<div class="content">\n    <div class="info">\n        <p>Hey {!! $user->display_name !!}!</p>\n\n        <p><a href="{{ $url->to(\'forum\')->route(\'user\', [\'username\' => $blueprint->reply->user->username]) }}">{!! $blueprint->reply->user->username !!}</a> replied to your post (#{!! $blueprint->post->number !!}) in <a href="{{ $url->to(\'forum\')->route(\'discussion\', [\'id\' => $blueprint->post->discussion_id, \'near\' => $blueprint->reply->number]) }}">{!! $blueprint->post->discussion->title !!}</a>.</p>\n\n        ---\n\n    </div>\n    <br/>\n    <div class="post-content">\n        {!! $blueprint->reply->formatContent() !!}\n    </div>\n    <br/>\n</div>\n<div class="footer">\n    <div class="content">\n        <p>Sent from {{ $settings->get(\'forum_title\') }} using FoF Pretty Mail</p>\n    </div>\n</div>\n</body>\n</html>')}},o().translator.trans("fof-pretty-mail.admin.settings.reset")),m("textarea.FormControl",{rows:"15",value:this.values.postMentioned(),style:"margin-bottom: 10px",oninput:y()("value",this.values.postMentioned)}),m("h1",o().translator.trans("fof-pretty-mail.admin.css_settings.label")),m("div",{className:"helpText",style:"margin: 10px 0 10px"},o().translator.trans("fof-pretty-mail.admin.css_settings.help",{strong:m("strong",null)})),c().component({className:"Form-group",state:"1"===this.values.includeCSS(),onchange:function(n){return t.values.includeCSS(n?"1":"0")}},o().translator.trans("fof-pretty-mail.admin.css_settings.switch_label")),i().component({type:"submit",className:"Button Button--primary",loading:this.loading,disabled:!this.changed()},o().translator.trans("core.admin.settings.submit_button"))])])])])]},a.changed=function(){var t=this;return this.fields.some((function(n){return t.values[n]()!==o().data.settings[t.addPrefix(n)]}))},a.onsubmit=function(t){var n=this;if(t.preventDefault(),!this.loading){this.loading=!0;var e={};this.fields.forEach((function(t){return e[n.addPrefix(t)]=n.values[t]()})),d()(e).then((function(){n.loading=!1,o().alerts.show({type:"success"},o().translator.trans("core.admin.basics.saved_message"))}))}},a.addPrefix=function(t){return this.settingsPrefix+"."+t},r}(l());o().initializers.add("fof-pretty-mail",(function(){o().extensionData.for("fof-pretty-mail").registerPage(b)}))})(),module.exports=n})();
//# sourceMappingURL=admin.js.map